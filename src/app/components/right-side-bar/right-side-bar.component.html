<div class="right-sidebar-container" [class.collapsed]="!isOpen">
  <!-- Collapsed State Button -->
  <button *ngIf="!isOpen" class="open-btn" (click)="toggleSidebar()" aria-label="Open sidebar">
    <img src="/icons/left-panel-close.svg" alt="Open" class="open-icon">
  </button>

  <div class="sidebar-content" *ngIf="isOpen">
    <!-- Header with tabs -->
    <div class="sidebar-header">
      <div class="tabs-container">
        <button 
          *ngFor="let tab of tabs" 
          class="tab"
          [class.active]="tab.isActive"
          (click)="switchTab(tab.id)">
          <img *ngIf="tab.icon === 'sparkle'" src="/icons/sparkle-icon.svg" alt="Sparkle" class="tab-icon" [class.active-icon]="tab.isActive">
          <img *ngIf="tab.icon === 'comment'" src="/icons/comment-icon.svg" alt="Comment" class="tab-icon" [class.active-icon]="tab.isActive">
          <span class="tab-label">{{ tab.label }}</span>
        </button>
      </div>
      <button class="close-btn" (click)="toggleSidebar()" aria-label="Close panel">
        <img src="/icons/right-panel-close.svg" alt="Close" class="close-icon">
      </button>
    </div>

    <!-- Content area -->
    <div class="content-area">
      <div *ngIf="activeTab === 'ai-companion'" class="tab-content">
        <!-- AI Companion Messages -->
        <div class="messages-container">
          <div *ngFor="let message of messages" class="message-wrapper">
            <!-- User Avatar -->
            <div class="message-avatar">
              <img src="/icons/black-ai-icon.svg" alt="User" class="black-ai-icon">
            </div>

            <!-- Message Content -->
            <div class="message-bubble">
              <div class="message-text" [innerHTML]="message.content"></div>

              <!-- File Attachments -->
              <div *ngIf="message.files && message.files.length > 0" class="file-attachments">
                <div *ngFor="let file of message.files" class="file-card">
                  <div class="file-info">
                    <div class="file-icon" [class.file-icon-doc]="file.type === 'DOC'" [class.file-icon-pdf]="file.type === 'PDF'">
                      <span class="file-type-label">{{ file.type }}</span>
                    </div>
                    <div class="file-details">
                      <p class="file-name">{{ file.name }}</p>
                      <p class="file-date">Uploaded: {{ file.uploadDate }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Suggestion Prompt -->
          <div class="suggestion-container">
            <div class="suggestion-preview">
              <div class="suggestion-icons">
                <div class="mini-doc-icon doc-rotated-left"></div>
                <div class="mini-doc-icon doc-rotated-right"></div>
              </div>
              <p class="suggestion-text">AB Core follows a disciplined investment approach that supports</p>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="activeTab === 'comments'" class="tab-content">
        <!-- Comments content will go here -->
      </div>
    </div>

    <!-- Input section -->
    <div class="input-section">
      <div class="input-container">
        <input 
          type="text" 
          class="message-input" 
          placeholder="Type Something"
          [(ngModel)]="userInput"
          (keyup.enter)="onSendMessage()">
        <div class="input-actions">
          <button class="attach-btn" (click)="onAttachFile()" aria-label="Attach file">
            <img src="/icons/attach-icon.svg" alt="Attach" class="attach-icon">
          </button>
          <button class="send-btn" (click)="onSendMessage()" aria-label="Send message">
            <img src="/icons/send-icon.svg" alt="Send" class="send-icon">
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
