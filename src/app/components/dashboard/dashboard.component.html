<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1 class="welcome-title">{{ currentUser.greeting }}, {{ currentUser.name }}!</h1>
      <p class="welcome-subtitle">Here's what's happening with your research and reports today</p>
    </div>
    <div class="welcome-date">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="4" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
        <path d="M3 8H17" stroke="currentColor" stroke-width="1.5"/>
        <path d="M7 2V5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M13 2V5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <span>{{ currentDate | date: 'EEEE, MMMM d, yyyy' }}</span>
    </div>
  </div>

  <!-- Metrics Overview -->
  <div class="metrics-section">
    <div *ngFor="let metric of metrics" class="metric-card">
      <div class="metric-header">
        <div class="metric-icon-wrapper" [style.background-color]="metric.color + '15'">
          <img [src]="metric.icon" alt="{{ metric.title }}" class="metric-icon" [style.filter]="'brightness(0) saturate(100%)'" [style.opacity]="'0.8'">
        </div>
        <span class="metric-change" [class.positive]="metric.changeType === 'increase'" [class.negative]="metric.changeType === 'decrease'">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path *ngIf="metric.changeType === 'increase'" d="M6 2L6 10M6 2L9 5M6 2L3 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path *ngIf="metric.changeType === 'decrease'" d="M6 10L6 2M6 10L9 7M6 10L3 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          {{ metric.change }}%
        </span>
      </div>
      <div class="metric-content">
        <h3 class="metric-value">{{ metric.value }}</h3>
        <p class="metric-label">{{ metric.title }}</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions-section">
    <h2 class="section-title">Quick Actions</h2>
    <div class="quick-actions-grid">
      <a 
        *ngFor="let action of quickActions" 
        [routerLink]="action.route || null"
        class="action-card"
        [style.border-color]="action.color + '30'"
        (click)="onQuickAction(action)">
        <div class="action-icon-wrapper" [style.background-color]="action.color + '15'">
          <img [src]="action.icon" alt="{{ action.title }}" class="action-icon">
        </div>
        <div class="action-content">
          <h3 class="action-title" [style.color]="action.color">{{ action.title }}</h3>
          <p class="action-description">{{ action.description }}</p>
        </div>
        <svg class="action-arrow" width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M7 4L13 10L7 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="main-content-grid">
    <!-- Recent Reports -->
    <div class="reports-section">
      <div class="section-header">
        <h2 class="section-title">Recent Reports</h2>
        <button class="view-all-btn">View All</button>
      </div>

      <div class="reports-list">
        <div 
          *ngFor="let report of recentReports" 
          class="report-item"
          (click)="onReportClick(report)">
          <div class="report-main">
            <div class="report-icon">
              <img src="/icons/doc-icon.svg" alt="Report" class="report-icon-img">
            </div>
            <div class="report-content">
              <div class="report-header-row">
                <h3 class="report-title">{{ report.title }}</h3>
                <span class="report-status" [ngClass]="getStatusClass(report.status)">
                  {{ report.status }}
                </span>
              </div>
              <p class="report-strategy">{{ report.strategy }}</p>
              <div class="report-meta">
                <span class="report-author">
                  <img src="/icons/by-user-icon.svg" alt="Author" class="meta-icon">
                  {{ report.author }}
                </span>
                <span class="report-time">{{ formatTime(report.lastUpdated) }}</span>
              </div>
            </div>
          </div>
          
          <div class="report-progress-section">
            <div class="progress-info">
              <span class="progress-label">Progress</span>
              <span class="progress-percentage">{{ report.progress }}%</span>
            </div>
            <div class="progress-bar">
              <div 
                class="progress-fill" 
                [style.width.%]="report.progress"
                [ngClass]="getStatusClass(report.status)">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Upcoming Deadlines -->
    <div class="deadlines-section">
      <div class="section-header">
        <h2 class="section-title">Upcoming Deadlines</h2>
        <button class="view-all-btn">View All</button>
      </div>

      <div class="deadlines-list">
        <div 
          *ngFor="let deadline of upcomingDeadlines" 
          class="deadline-item"
          [ngClass]="getPriorityClass(deadline.priority)"
          (click)="onDeadlineClick(deadline)">
          <div class="deadline-indicator" [ngClass]="getPriorityClass(deadline.priority)">
          </div>
          <div class="deadline-icon-wrapper">
            <img [src]="getDeadlineIcon(deadline.type)" alt="{{ deadline.type }}" class="deadline-icon">
          </div>
          <div class="deadline-content">
            <h4 class="deadline-title">{{ deadline.title }}</h4>
            <div class="deadline-meta">
              <span class="deadline-type">{{ deadline.type }}</span>
              <span class="deadline-date">
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                  <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.2"/>
                  <path d="M7 3.5V7H10" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                </svg>
                {{ formatDate(deadline.dueDate) }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="upcomingDeadlines.length === 0" class="empty-state">
        <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
          <circle cx="24" cy="24" r="20" stroke="#E5E7EB" stroke-width="2"/>
          <path d="M24 16V24L30 27" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <p class="empty-text">No upcoming deadlines</p>
      </div>
    </div>
  </div>
</div>

