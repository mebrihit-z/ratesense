<nav class="navigation">
  <div class="nav-container">
    <!-- Logo at top -->
    <div class="nav-logo">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <rect width="24" height="24" rx="4" fill="#554BBD"/>
        <path d="M6 9L12 6L18 9V15L12 18L6 15V9Z" fill="white"/>
      </svg>
    </div>

    <!-- Bottom actions -->
    <div class="nav-actions">
      <!-- Notifications -->
      <div class="action-item" (click)="toggleNotifications()">
        <button class="action-btn notification-btn" [class.active]="showNotifications">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="#171921" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="#171921" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </button>

        <!-- Notifications Dropdown -->
        <div class="dropdown notifications-dropdown" *ngIf="showNotifications">
          <div class="dropdown-header">
            <h3>Notifications</h3>
            <button class="text-btn" (click)="markAllAsRead()">Mark all as read</button>
          </div>
          <div class="dropdown-content">
            <div 
              *ngFor="let notification of notifications" 
              class="notification-item"
              [class.unread]="!notification.read"
              (click)="markAsRead(notification)">
              <div class="notification-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <circle cx="8" cy="8" r="8" fill="#4CAF50"/>
                  <path d="M5 8L7 10L11 6" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="notification-content">
                <p class="notification-message">{{ notification.message }}</p>
                <span class="notification-time">{{ notification.time }}</span>
              </div>
            </div>
          </div>
          <div class="dropdown-footer">
            <button class="text-btn">View all notifications</button>
          </div>
        </div>
      </div>

      <!-- User Profile -->
      <div class="action-item" (click)="toggleUserMenu()">
        <button class="action-btn user-avatar-btn" [class.active]="showUserMenu">
          <div class="user-avatar">
            <span>{{ currentUser.initials }}</span>
          </div>
        </button>

        <!-- User Menu Dropdown -->
        <div class="dropdown user-dropdown" *ngIf="showUserMenu">
          <div class="dropdown-header">
            <div class="user-info">
              <div class="user-avatar large">
                <span>{{ currentUser.initials }}</span>
              </div>
              <div class="user-details">
                <h4>{{ currentUser.name }}</h4>
                <p>{{ currentUser.email }}</p>
              </div>
            </div>
          </div>
          <div class="dropdown-content">
            <button class="dropdown-item" (click)="navigateToProfile()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <circle cx="9" cy="6" r="3" stroke="currentColor" stroke-width="1.5"/>
                <path d="M4 15C4 12.7909 6.01472 11 8.5 11H9.5C11.9853 11 14 12.7909 14 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <span>Profile</span>
            </button>
            <button class="dropdown-item" (click)="navigateToSettings()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <circle cx="9" cy="9" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                <path d="M14 9C14 9.5 14.5 10 15 10C15.5 10 16 9.5 16 9C16 8.5 15.5 8 15 8C14.5 8 14 8.5 14 9Z" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <span>Settings</span>
            </button>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item danger" (click)="logout()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <path d="M7 15H4C3.44772 15 3 14.5523 3 14V4C3 3.44772 3.44772 3 4 3H7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12 12L15 9M15 9L12 6M15 9H7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Backdrop for closing dropdowns -->
  <div class="dropdown-backdrop" *ngIf="showUserMenu || showNotifications" (click)="closeDropdowns()"></div>
</nav>

