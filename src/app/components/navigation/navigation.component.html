<nav class="navigation">
  <div class="nav-container">
    <!-- Logo/Brand -->
    <div class="nav-brand">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="8" fill="#313131"/>
          <path d="M8 12L16 8L24 12V20L16 24L8 20V12Z" fill="white"/>
        </svg>
      </div>
      <span class="brand-name">Market Sense</span>
    </div>

    <!-- Navigation Items -->
    <div class="nav-items">
      <a 
        *ngFor="let item of navItems" 
        [routerLink]="item.route"
        routerLinkActive="active"
        class="nav-item">
        {{ item.label }}
      </a>
    </div>

    <!-- Right Section -->
    <div class="nav-actions">
      <!-- Search -->
      <div class="search-container">
        <svg class="search-icon" width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
          <path d="M12.5 12.5L16 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Search..."
          (input)="onSearch($event)"
          [value]="searchQuery">
      </div>

      <!-- Notifications -->
      <div class="action-item" (click)="toggleNotifications()">
        <button class="icon-btn" [class.active]="showNotifications">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M15 6.5C15 4.29086 13.2091 2.5 11 2.5C8.79086 2.5 7 4.29086 7 6.5C7 10.5 5.5 11.5 5.5 11.5H16.5C16.5 11.5 15 10.5 15 6.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9.5 14.5C9.5 15.0523 9.94772 15.5 10.5 15.5C11.0523 15.5 11.5 15.0523 11.5 14.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </button>

        <!-- Notifications Dropdown -->
        <div class="dropdown notifications-dropdown" *ngIf="showNotifications">
          <div class="dropdown-header">
            <h3>Notifications</h3>
            <button class="text-btn" (click)="markAllAsRead()">Mark all as read</button>
          </div>
          <div class="dropdown-content">
            <div 
              *ngFor="let notification of notifications" 
              class="notification-item"
              [class.unread]="!notification.read"
              (click)="markAsRead(notification)">
              <div class="notification-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <circle cx="8" cy="8" r="8" fill="#4CAF50"/>
                  <path d="M5 8L7 10L11 6" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="notification-content">
                <p class="notification-message">{{ notification.message }}</p>
                <span class="notification-time">{{ notification.time }}</span>
              </div>
            </div>
          </div>
          <div class="dropdown-footer">
            <button class="text-btn">View all notifications</button>
          </div>
        </div>
      </div>

      <!-- User Profile -->
      <div class="action-item" (click)="toggleUserMenu()">
        <button class="user-btn" [class.active]="showUserMenu">
          <div class="avatar">
            <span>{{ currentUser.initials }}</span>
          </div>
          <svg class="chevron" width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <!-- User Menu Dropdown -->
        <div class="dropdown user-dropdown" *ngIf="showUserMenu">
          <div class="dropdown-header">
            <div class="user-info">
              <div class="avatar large">
                <span>{{ currentUser.initials }}</span>
              </div>
              <div class="user-details">
                <h4>{{ currentUser.name }}</h4>
                <p>{{ currentUser.email }}</p>
              </div>
            </div>
          </div>
          <div class="dropdown-content">
            <button class="dropdown-item" (click)="navigateToProfile()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <circle cx="9" cy="6" r="3" stroke="currentColor" stroke-width="1.5"/>
                <path d="M4 15C4 12.7909 6.01472 11 8.5 11H9.5C11.9853 11 14 12.7909 14 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <span>Profile</span>
            </button>
            <button class="dropdown-item" (click)="navigateToSettings()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <circle cx="9" cy="9" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                <path d="M14 9C14 9.5 14.5 10 15 10C15.5 10 16 9.5 16 9C16 8.5 15.5 8 15 8C14.5 8 14 8.5 14 9Z" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <span>Settings</span>
            </button>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item danger" (click)="logout()">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <path d="M7 15H4C3.44772 15 3 14.5523 3 14V4C3 3.44772 3.44772 3 4 3H7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12 12L15 9M15 9L12 6M15 9H7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Backdrop for closing dropdowns -->
  <div class="dropdown-backdrop" *ngIf="showUserMenu || showNotifications" (click)="closeDropdowns()"></div>
</nav>

